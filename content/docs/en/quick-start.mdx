---
title: Quick Start
description: How to quickly install and run ImageFlow
---

# Quick Start

This guide will help you quickly install and configure ImageFlow.

### Prerequisites

- Go 1.22 or higher
- Node.js 18 or higher (for frontend build)
- WebP tools (`libwebp-tools`)
- AVIF tools (`libavif-apps`)
- Redis (optional, for metadata and tags storage)
- Docker and Docker Compose (optional, for containerized deployment)

### Installation

#### Method 1: Direct Installation

1.  Clone the repository

    ```bash
    git clone https://github.com/Yuri-NagaSaki/ImageFlow.git
    cd ImageFlow
    ```

2.  Build frontend

    ```bash
    cd frontend
    bash build.sh
    cd ..
    ```

3.  Build backend

    ```bash
    go mod tidy
    go build -o imageflow
    ```

4.  Configure environment variables

    ```bash
    cp .env.example .env
    # Edit the .env file with your configuration
    ```

5.  Set up system service (example using systemd)

    ```ini filename="/etc/systemd/system/imageflow.service"
    [Unit]
    Description=ImageFlow Service
    After=network.target

    [Service]
    ExecStart=/path/to/imageflow
    WorkingDirectory=/path/to/imageflow/directory
    Restart=always
    User=youruser
    EnvironmentFile=/path/to/imageflow/.env

    [Install]
    WantedBy=multi-user.target
    ```

6.  Enable the service

    ```bash
    sudo systemctl enable imageflow
    sudo systemctl start imageflow
    ```

#### Method 2: Docker Deployment

1.  Using pre-built image (recommended)

    ```bash
    # 1. Clone the repository
    git clone https://github.com/Yuri-NagaSaki/ImageFlow.git
    cd ImageFlow

    # 2. Configure environment
    cp .env.example .env
    # Edit the .env file

    # 3. Start service
    docker compose up -d
    ```

2.  Local build deployment

    ```bash
    # 1. Clone the repository
    git clone https://github.com/Yuri-NagaSaki/ImageFlow.git
    cd ImageFlow

    # 2. Configure environment
    cp .env.example .env
    # Edit the .env file

    # 3. Build and start
    docker compose -f docker-compose-build.yml up --build -d
    ```

### Configuration Guide

Configure the system by creating and editing the `.env` file. Here are the main configuration options:

```bash filename=".env"
# API Key Configuration
API_KEY=your_api_key_here  # Set your API key

# Storage Configuration
STORAGE_TYPE=local  # Storage type: local or s3 (S3-compatible storage)
LOCAL_STORAGE_PATH=static/images  # Local storage path

# Redis Configuration
REDIS_ENABLED=true  # Enable Redis for metadata and tags storage
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_PREFIX=imageflow:
REDIS_TLS_ENABLED=false  # Enable TLS for Redis connection

# S3 Storage Configuration (required when STORAGE_TYPE=s3)
S3_ENDPOINT=  # S3 endpoint address
S3_REGION=    # S3 region
S3_ACCESS_KEY=  # Access key
S3_SECRET_KEY=  # Secret key
S3_BUCKET=      # Bucket name
CUSTOM_DOMAIN=  # Custom domain

# Image Processing Configuration
MAX_UPLOAD_COUNT=20    # Maximum upload count per request
IMAGE_QUALITY=80      # Image quality (1-100)
WORKER_THREADS=4      # Number of parallel processing threads
COMPRESSION_EFFORT=6  # Compression level (1-10)
FORCE_LOSSLESS=false  # Force lossless compression
```

### Metadata Migration

If you enable Redis after previously using file-based metadata storage, you can migrate your metadata to Redis:

```bash
# Run the migration tool
bash migrate.sh

# Force migration even if it was already completed
bash migrate.sh --force

# Specify a custom .env file
bash migrate.sh --env /path/to/.env
``` 